---
title: "Where do I live next?"
author: "Vicki Lowe"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# Install / load required packages
if (!require("pacman")) install.packages("pacman")
pacman::p_load(httr, jsonlite)
```

## I need data

The Domain Group provides access to their agency, listing, and property data by [signing up](https://developer.domain.com.au/docs) for an account. I followed their [Getting Started](https://developer.domain.com.au/docs/read/Getting_Started) instructions and found out that I could get all the rental information available on [domain.com.au](domain.com.au).

My access token expired after 12 hours, so I automated the renewal process. My Domain Group credentials are in a separate, non-public file, called api_keys_domain.R.
```{r use the domain.com.au listing API}
# Read in my Domain Group credentials: client_id and client_secret
source('api_keys_domain.R')

# Get latest access token
access.token.response <- GET(
  "https://developer.domain.com.au/io-docs/getoauth2accesstoken",
  query = list(
    apiId = 6611,
    auth_flow = "client_cred",
    client_id = client_id,
    client_secret = client_secret),
  verbose())
access.token <- content(access.token.response)$result$access_token
```
